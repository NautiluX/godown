<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>GoDown Previewer</title>
	<link rel="stylesheet" href="./github-markdown.css">
	<link rel="stylesheet" href="./github.min.css">
	<link rel="stylesheet" href="./style.css">
	<script src="./highlight.min.js"></script>
	<script>
		window.onload = function() {
			var ws = new WebSocket('ws://localhost:1337/connect');
			var container = document.getElementById('container');
			ws.onmessage = function(e) {
				var html = JSON.parse(e.data).render;
				container.innerHTML = html;
				Array.prototype.slice.call(container.querySelectorAll('pre code'))
				.forEach(function(block) {
					hljs.highlightBlock(block);
				});
			};
		}
	</script>
</head>
<body>
	<div id="container" class="markdown-body"></div>
</body>
</html>
